name: "OBIS D0 Reader"
version: "1.0.0"
slug: obis_d0_reader
description: "Liest OBIS D0-Stromzähler via ser2net und sendet Daten an MQTT"
arch:
  - aarch64
  - amd64
  - armhf
  - armv7
  - i386
url: "https://github.com/lejando/homeassistant-obis"
startup: application
boot: auto
init: false

options:
  # ser2net Verbindung
  tcp_host: "192.168.1.100"
  tcp_port: 3000

  # MQTT Einstellungen
  mqtt_enabled: true
  mqtt_host: "core-mosquitto"
  mqtt_port: 1883
  mqtt_user: ""
  mqtt_password: ""
  mqtt_base_topic: "homeassistant/sensor/obis"
  mqtt_discovery: true
  mqtt_discovery_prefix: "homeassistant"

  # Erweiterte MQTT Topic-Konfiguration
  mqtt_topic_mode: "auto"  # auto, custom
  mqtt_custom_topics: {}

  # Zähler-Einstellungen
  meter_name: "easyMeter"
  poll_interval: 2

  # Logging
  log_level: "info"

schema:
  tcp_host: str
  tcp_port: int
  mqtt_enabled: bool
  mqtt_host: str
  mqtt_port: int
  mqtt_user: str?
  mqtt_password: password?
  mqtt_base_topic: str
  mqtt_discovery: bool
  mqtt_discovery_prefix: str
  mqtt_topic_mode: list(auto|custom)
  meter_name: str
  poll_interval: int(1,60)
  log_level: list(debug|info|warning|error)

services:
  - mqtt:want

# Image wird vom Build-System automatisch gesetzt, wenn build.yaml vorhanden ist
